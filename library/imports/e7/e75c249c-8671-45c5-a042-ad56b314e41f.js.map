{"version":3,"sources":["..\\..\\..\\..\\assets\\raphael/assets\\raphael\\R.group.js"],"names":["Path","require","trasform","style","utils","svg","GroupDefine","extends","cc","Component","properties","selected","default","notify","children","i","ii","length","_dirty","serializable","onLoad","init","ctx","_ccsg","GraphicsNode","node","_sgNode","addChild","parent","showBoundingBox","addPath","path","push","addGroup","group","Group","getWorldBbox","rect","bbox","width","height","rectUnion","update","dt","clear","child","x","y","stroke","Class","defineClass"],"mappings":"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","file":"R.group.js","sourceRoot":"..\\..\\..\\..\\assets\\raphael","sourcesContent":["var Path = require('./R.path');\r\n\r\nvar trasform = require('./component/R.transform');\r\nvar style = require('./component/R.style');\r\nvar utils = require('./utils/R.utils');\r\n\r\n// optional\r\nvar svg = require('./component/optional/R.svg');\r\n\r\nvar GroupDefine = {\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        selected: {\r\n            default: false,\r\n            notify: function () {\r\n                var children = this.children;\r\n                var selected = this.selected;\r\n\r\n                for (var i = 0, ii = children.length; i < ii; i++) {\r\n                    children[i].selected = selected;\r\n                }\r\n            }\r\n        },\r\n\r\n        _dirty: {\r\n            default: true,\r\n            serializable: false\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.init();\r\n\r\n        if (!this.ctx) {\r\n            this.ctx = new _ccsg.GraphicsNode();\r\n            this.node._sgNode.addChild(this.ctx);\r\n        }\r\n    },\r\n\r\n    init: function (parent) {\r\n        this.children = [];\r\n\r\n        if (parent) {\r\n            this.parent = parent;\r\n            this.ctx = parent.ctx;\r\n        }\r\n\r\n        this.showBoundingBox = false;\r\n    },\r\n\r\n    addPath: function () {\r\n        var path = new Path();\r\n        path.init(this);\r\n\r\n        this.children.push(path);\r\n        this._dirty = true;\r\n\r\n        return path;\r\n    },\r\n\r\n    addGroup: function () {\r\n        var group = new Group();\r\n        group.init(this);\r\n\r\n        this.children.push(group);\r\n        this._dirty = true;\r\n\r\n        return group;\r\n    },\r\n\r\n    getWorldBbox: function () {\r\n        var rect;\r\n        var children = this.children;\r\n        for (var i = 0, ii = children.length; i < ii; i++) {\r\n            var bbox = children[i].getWorldBbox();\r\n            \r\n            if (bbox.width !== 0 && bbox.height !== 0) {\r\n                if (!rect) {\r\n                    rect = children[i].getWorldBbox();\r\n                }\r\n                else {\r\n                    rect = cc.rectUnion(rect, children[i].getWorldBbox());    \r\n                }\r\n            }\r\n        }\r\n\r\n        return rect || cc.rect();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n\r\n        if (!this._dirty) return;\r\n\r\n        if (!this.parent) {\r\n            this.ctx.clear();\r\n        }\r\n\r\n        var children = this.children;\r\n        for (var i = 0, ii = children.length; i < ii; i++) {\r\n            var child = children[i];\r\n            child._dirty = true;\r\n            child.update(dt);\r\n        }\r\n\r\n        if (this.showBoundingBox) {\r\n            var bbox = this.getWorldBbox();\r\n            this.ctx.rect(bbox.x, bbox.y, bbox.width, bbox.height);\r\n            this.ctx.stroke();\r\n        }\r\n\r\n        this._dirty = false;\r\n    },\r\n};\r\n\r\nvar Group = cc.Class(utils.defineClass(GroupDefine, trasform, style, svg));\r\n"]}