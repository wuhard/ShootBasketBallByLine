{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\NoticeAndProduceManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import Singleton from \"./Singleton\";\r\nimport ProduceBasketManager from \"./ProduceBasketManager\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class NoticeAndProduceManager extends Singleton<NoticeAndProduceManager> {\r\n\r\n    @property(cc.Node)\r\n    ballParent:cc.Node;\r\n\r\n    @property(cc.Prefab)\r\n    ballGuide:cc.Prefab;\r\n\r\n    @property(cc.Prefab)\r\n    boomGuide:cc.Prefab;\r\n\r\n    @property(cc.Prefab)\r\n    ball:cc.Prefab;\r\n\r\n    @property(cc.Prefab)\r\n    boom:cc.Prefab;\r\n\r\n    @property(cc.Node)\r\n    guidePos:cc.Node[] = [];\r\n\r\n    bornPos : cc.Node[] = [];\r\n\r\n    bornType: number[] = []; // 0代表篮球 -1代表炸弹\r\n\r\n    velocity: cc.Vec2[] = [cc.v2(0,2000),cc.v2(0,2500)];\r\n    \r\n    @property(ProduceBasketManager)\r\n    produceBasketManager:ProduceBasketManager;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n      \r\n    }\r\n\r\n    CreatBornPosByType(posType:number)\r\n    {\r\n        this.bornPos.splice(0,this.bornPos.length);\r\n        switch(posType)\r\n        {\r\n            case -1:\r\n                    this.bornPos.push(this.guidePos[this.random(2,this.guidePos.length)]);\r\n                break;\r\n            case 0:\r\n                 this.bornPos.push(this.random(0,2) == 0 ? this.guidePos[0]:this.guidePos[3]);\r\n                break;\r\n            case 1:\r\n                 this.bornPos.push(this.guidePos[this.random(0,2)]);\r\n                break;\r\n        }\r\n      //  cc.log(\"BornPosLength\" + this.bornPos.length);\r\n    }\r\n\r\n    ///设置生成位置数据\r\n    public SetBornType(pos:number[])\r\n    {\r\n        //清空\r\n        this.bornPos.splice(0,this.bornPos.length);\r\n        for(var i = 0; i < pos.length; i++)\r\n        {\r\n            this.bornType.push(pos[i]);\r\n        }\r\n    }\r\n\r\n    ///获取创建的位置信息\r\n    CreatBornPos(num:number)\r\n    {\r\n        this.bornPos.splice(0,this.bornPos.length);\r\n\r\n        var randomPos:number[] = [];\r\n        for(var i = 0; i < this.guidePos.length; i++)\r\n        {\r\n            randomPos.push(i);\r\n           \r\n        }\r\n        for(var j = 0; j < num; j++)\r\n        {\r\n            var randomValue =  this.random(0,randomPos.length);\r\n            var posIndex:number = randomPos[randomValue];\r\n           \r\n           \r\n            this.bornPos.push(this.guidePos[posIndex]);\r\n            randomPos.slice(randomValue,1);\r\n        }\r\n     \r\n    }\r\n\r\n    ///获取出场顺序\r\n    CreatBornTypeOrde()\r\n    {\r\n        this.bornType.slice(0,this.bornType.length);\r\n\r\n        for(var i = 0; i < this.bornPos.length; i++)\r\n        {\r\n            this.bornType.push(this.random(-1,1));\r\n        }\r\n\r\n        var ballOrder = this.random(0,this.bornType.length);\r\n        this.bornType[ballOrder] = 0;\r\n    }\r\n    \r\n\r\n    ProduceOneBallGuide(posNode:cc.Node):cc.Node\r\n    {\r\n        let bornNode = posNode;\r\n\r\n        let tempball = cc.instantiate(this.ballGuide);\r\n        this.node.addChild(tempball);\r\n        tempball.setPosition(bornNode.position);\r\n        return tempball;\r\n\r\n    }\r\n\r\n    \r\n     ProduceOneBoomGuide():cc.Node\r\n    {\r\n        let bornNode = this.guidePos[this.random(0,this.guidePos.length)];\r\n\r\n        let tempball = cc.instantiate(this.ballGuide);\r\n        this.node.addChild(tempball);\r\n        tempball.setPosition(bornNode.position);\r\n        return tempball;\r\n    }\r\n\r\n    //创建一次用例\r\n    public ProduceOneCase(num:number)\r\n    {\r\n        // this.CreatBornPos(num);\r\n        // this.CreatBornTypeOrde();\r\n        var posType = this.produceBasketManager.GetPosType();\r\n        this.CreatBornPosByType(posType);\r\n        for(var i = 0; i < this.bornPos.length; i++)\r\n        {\r\n            var tempball = this.ProduceOneBallGuide(this.bornPos[i]);\r\n            this.scheduleOnce(() => {\r\n                // 这里的 this 指向 component\r\n                this.ProduceBallAction(tempball);\r\n            }, 0.5);//2s后执行一次\r\n        } \r\n\r\n        \r\n\r\n\r\n      //  this.ProduceOneBall(this.bornPos[0],cc.v2(0,2000));\r\n    }\r\n\r\n    ProduceBallAction(guidBall:cc.Node)\r\n    {\r\n       // cc.log(\"Destory\");\r\n        this.ProduceOneBall(guidBall,cc.v2(0,2000));\r\n        guidBall.destroy();\r\n      \r\n    }\r\n\r\n    //创建一个球的\r\n    ProduceOneBall(posNode:cc.Node,velocity:cc.Vec2)\r\n    {\r\n      \r\n        var startPos =  posNode.convertToWorldSpaceAR(cc.v2(0,0));\r\n      \r\n        let tempball = cc.instantiate(this.ball);\r\n        tempball.parent = this.ballParent;\r\n        tempball.position = this.ballParent.convertToNodeSpaceAR(startPos);\r\n        tempball.getComponent<cc.RigidBody>(cc.RigidBody).linearVelocity = velocity;\r\n    }\r\n\r\n    random(lower, upper) {\r\n\r\n        return Math.floor(Math.random() * (upper - lower)) + lower;\r\n        \r\n    }\r\n    \r\n    \r\n\r\n}\r\n"]}