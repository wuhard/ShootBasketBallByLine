{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\LevelDataManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import Singleton from \"./Singleton\";\r\nimport ProduceBasketManager from \"./ProduceBasketManager\";\r\nimport SceneLevelData, { BasketInforJson } from \"./SceneLevelData\";\r\nimport {BasketInfor} from \"./SceneLevelData\";\r\nimport {ShootInfor} from \"./SceneLevelData\";\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class LevelDataManager extends Singleton<LevelDataManager> {\r\n\r\n   public levelData:SceneLevelData[] = [];\r\n   relateDis:number;\r\n   screenWidth:number;\r\n\r\n    start () {\r\n        this.LoadJson(\"LevelData\");\r\n        var b = cc.director.getWinSizeInPixels();\r\n        var bx = b.width;\r\n        var by = b.height;\r\n        this.screenWidth = bx;\r\n        cc.log(bx);\r\n        this.relateDis = (720 - bx)*0.5;\r\n       \r\n    }\r\n\r\n    //读取关卡数据\r\n    LoadJson(json_name:string) {\r\n        let json_url = 'json/' + json_name;\r\n        return new Promise((resolve, reject) => {\r\n            cc.loader.loadRes(json_url, (err, object) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    this.levelData = object;\r\n                    cc.log(this.levelData[0].basketInfors[0].basketPos);\r\n                    cc.log(this.levelData.length);\r\n                   // this.StringToNumberArray(this.levelData[0].basketPos);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    \r\n    ///获取某一个关卡的篮筐信息\r\n    public GetBasketInforsByLevel(levelIndex:number):BasketInfor[]\r\n    {\r\n        let infors:BasketInfor[] = [];\r\n        for(var i = 0; i < this.levelData[levelIndex].basketInfors.length; i++)\r\n        {\r\n            let oneInfor = new BasketInfor();\r\n            cc.log(this.StringToVec2(this.levelData[levelIndex].basketInfors[i].basketPos));\r\n            oneInfor.basketPos = this.StringToVec2(this.levelData[levelIndex].basketInfors[i].basketPos);\r\n            \r\n           \r\n            oneInfor.basketType = this.levelData[levelIndex].basketInfors[i].basketType;\r\n            if(oneInfor.basketType == 0 || oneInfor.basketType == 1 )\r\n            {\r\n                oneInfor.basketPos =new cc.Vec2(oneInfor.basketPos.x + this.relateDis, oneInfor.basketPos.y);\r\n            }\r\n            else if(oneInfor.basketType == 3 || oneInfor.basketType == 4 )\r\n            {\r\n                oneInfor.basketPos =new cc.Vec2(oneInfor.basketPos.x - this.relateDis, oneInfor.basketPos.y);\r\n            }\r\n            oneInfor.moveEndPos = this.StringToVec2(this.levelData[levelIndex].basketInfors[i].moveEndPos)\r\n            oneInfor.moveDuringTime =  this.levelData[levelIndex].basketInfors[i].moveDuringTime;\r\n            infors.push(oneInfor);\r\n        }\r\n        return infors;\r\n    }\r\n\r\n    ///获取某一关卡的射击信息\r\n    public GetShootInforByLevel(levelIndex:number):ShootInfor[]\r\n    {\r\n        let basketInfor= this.GetBasketInforsByLevel(levelIndex)[0];\r\n\r\n      \r\n\r\n\r\n        let infors:ShootInfor[] = [];\r\n        for(var i = 0; i < this.levelData[levelIndex].shootInfors.length; i++)\r\n        {\r\n            let oneInfor = new ShootInfor();\r\n            \r\n            oneInfor.shootType = this.levelData[levelIndex].shootInfors[i].shootType;\r\n            oneInfor.shootPos = this.StringToVec2(this.levelData[levelIndex].shootInfors[i].shootPos);\r\n           \r\n           \r\n               if(oneInfor.shootPos.x - basketInfor.basketPos.x < 0)\r\n               {\r\n                   oneInfor.shootPos = new cc.Vec2(oneInfor.shootPos.x - this.relateDis < 23?23:oneInfor.shootPos.x - this.relateDis ,oneInfor.shootPos.y);\r\n               }\r\n               else\r\n               {\r\n\r\n               \r\n                oneInfor.shootPos = new cc.Vec2(oneInfor.shootPos.x + this.relateDis > this.screenWidth-this.relateDis? this.screenWidth - this.relateDis:oneInfor.shootPos.x + this.relateDis ,oneInfor.shootPos.y);\r\n               }\r\n          \r\n\r\n           \r\n      \r\n           \r\n            oneInfor.velocity = this.StringToVec2(this.levelData[levelIndex].shootInfors[i].velocity)\r\n            oneInfor.shootDelayTime =  this.levelData[levelIndex].shootInfors[i].shootDelayTime;\r\n            infors.push(oneInfor);\r\n        }\r\n        return infors;\r\n    }\r\n \r\n    ///分辨率不同手机对球的位置处理 -1代表球在篮筐左边，0代表在中间， 1代表在右边\r\n    GetBallPosType(levelIndex:number)\r\n    {\r\n\r\n    }\r\n\r\n    public GetLevelLength():number\r\n    {\r\n        return this.levelData.length;\r\n    }\r\n\r\n\r\n    ///字符串转vec2\r\n    public StringToVec2(str:string):cc.Vec2\r\n    {\r\n        let vecNum = this.StringToNumberArray(str);\r\n        return cc.v2(vecNum[0],vecNum[1]);\r\n    }\r\n\r\n    //字符串转换成数组\r\n    public StringToNumberArray(str:string):number[]\r\n    {\r\n        var num : number[] = [];\r\n        var numStr = str.split('_');\r\n        for(var i = 0; i < numStr.length; i++)\r\n        {\r\n            num.push(Number(numStr[i]));      \r\n        }\r\n\r\n        return num;\r\n    }\r\n\r\n}\r\n"]}