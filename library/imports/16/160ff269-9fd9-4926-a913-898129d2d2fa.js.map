{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\EffectPlayManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import Singleton from \"./Singleton\";\r\nimport ShowScore from \"./ShowScore\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class EffectPlayManager extends Singleton<EffectPlayManager> {\r\n\r\n    @property(cc.Prefab)\r\n    enterBallAni:cc.Prefab;\r\n\r\n   \r\n    \r\n    @property(cc.Prefab)\r\n    score:cc.Prefab;\r\n\r\n    @property(cc.Prefab)\r\n    bombBasket:cc.Prefab;\r\n\r\n    \r\n    @property(cc.Prefab)\r\n    lineDieParticlePrefab:cc.Prefab;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    //线的间隔\r\n    linePointDieDis:number = 25;\r\n\r\n    ///线的长度\r\n    lineDis : number;\r\n    \r\n    linePartices:cc.Node[] = [];\r\n    // onLoad () {}\r\n\r\n    start () {\r\n      \r\n    }\r\n\r\n    public PlayEnterBallAni(pos:cc.Vec2)\r\n    {\r\n        let ani = cc.instantiate(this.enterBallAni);\r\n       // cc.log(\"PlayAni\");\r\n        ani.parent = this.node;\r\n        ani.setPosition(pos);\r\n    }\r\n\r\n    ///得分动画\r\n    public PlayScoreAni(pos:cc.Vec2,lineCount:number)\r\n    {\r\n       let score = cc.instantiate(this.score);\r\n       var script = score.getComponent<ShowScore>(ShowScore);\r\n       script.ShowScorePoint(lineCount);\r\n       // cc.log(\"PlayAni\");\r\n       score.parent = this.node;\r\n       score.setPosition(pos);\r\n    }\r\n    \r\n    public PlayBombBasketAni(pos:cc.Vec2)\r\n    {  \r\n        let bombBasket = cc.instantiate(this.bombBasket);\r\n        // cc.log(\"PlayAni\");\r\n        bombBasket.parent = this.node;\r\n        bombBasket.setPosition(pos);\r\n\r\n    }\r\n\r\n    ///获取线的长度\r\n    GetLineDis(points:cc.Vec2[]):number\r\n    {\r\n        this.lineDis = 0;\r\n        for(var i = 0; i < points.length-1; i++)\r\n        {\r\n            this.lineDis += cc.pDistance(points[i], points[i+1]) \r\n        }\r\n\r\n        return this.lineDis;\r\n    }\r\n\r\n    public PlayLineDieEffection(points:cc.Vec2[])\r\n    {\r\n        this.linePartices.splice(0,this.linePartices.length);\r\n      \r\n        if(points.length <= 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        var diePointNum = this.GetLineDis(points) / this.linePointDieDis + 1;\r\n      //  cc.log(points.length + \"  \" + diePointNum);\r\n        if(points.length > diePointNum)\r\n        {\r\n            \r\n            for(var i = 0; i < diePointNum; i++)\r\n            {\r\n                let lineDie = cc.instantiate(this.lineDieParticlePrefab);\r\n                lineDie.parent = this.node;\r\n                this.linePartices.push(lineDie);\r\n                if(points.length/diePointNum * i < points.length)\r\n                {\r\n                  \r\n                    lineDie.setPosition(points[Math.floor(points.length/diePointNum * i)]);\r\n                }\r\n                \r\n            }\r\n        }\r\n        else\r\n        {\r\n            for(var i = 0; i < points.length-1; i++)\r\n            {\r\n                \r\n                let pointNum = cc.pDistance(points[i],points[i+1])/this.linePointDieDis;\r\n                // cc.log(cc.pDistance(points[i],points[i+1])+ \"  \" + pointNum);\r\n                let lineDie = cc.instantiate(this.lineDieParticlePrefab);\r\n                lineDie.parent = this.node;\r\n                this.linePartices.push(lineDie);\r\n                lineDie.setPosition(points[i]);\r\n                for(var j = 1; j < pointNum; j++)\r\n                {\r\n                    cc.log (\"add\");\r\n                    let lineDie = cc.instantiate(this.lineDieParticlePrefab);\r\n                    lineDie.parent = this.node;\r\n                    this.linePartices.push(lineDie);\r\n                    let x = (j+1)/pointNum*points[i+1].x + (pointNum - j - 1)/pointNum*points[i].x;\r\n                    let y = (j+1)/pointNum*points[i+1].y + (pointNum - j - 1)/pointNum*points[i].y;\r\n                    let pos = cc.v2(x,y);\r\n                    lineDie.setPosition(pos);\r\n                } \r\n              \r\n            }\r\n            \r\n                let lineDie = cc.instantiate(this.lineDieParticlePrefab);\r\n                lineDie.parent = this.node;\r\n                this.linePartices.push(lineDie);\r\n                lineDie.setPosition(points[points.length - 1]);\r\n        }\r\n    \r\n    }\r\n\r\n      \r\n       \r\n}\r\n"]}