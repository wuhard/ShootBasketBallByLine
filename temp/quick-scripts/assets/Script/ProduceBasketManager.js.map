{"version":3,"sources":["ProduceBasketManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import Singleton from \"./Singleton\";\r\nimport Basket from \"./Basket\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class ProduceBasketManager extends Singleton<ProduceBasketManager> {\r\n\r\n    @property(cc.Prefab)\r\n    smallBasket:cc.Prefab;\r\n\r\n    @property(cc.Prefab)\r\n    bigBasketL:cc.Prefab;\r\n\r\n    \r\n    @property(cc.Prefab)\r\n    bigBasketR:cc.Prefab;\r\n\r\n\r\n   \r\n\r\n    @property(cc.Node)\r\n    basketBackParent:cc.Node;//篮球背面图片\r\n    @property(cc.Node)\r\n    basketFrontParent:cc.Node;//篮球前面图片\r\n    @property(cc.Node)\r\n    basketParent:cc.Node;\r\n\r\n\r\n    sizeType = 0;// 代表不带板，1代表有板子\r\n\r\n    posType = -1;// -1代表左边，0代表中间，1代表右边\r\n    @property(cc.Node)\r\n    basketBornPos: cc.Node[] = [];\r\n   \r\n    basketList:cc.Node[] = [];\r\n     \r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () {\r\n\r\n    //    var tempChildPos0 =this.pos0.children; \r\n    //     for (var i = 0; i < tempChildPos0.length; i++) \r\n    //     { \r\n          \r\n    //         this.leftPos.push(tempChildPos0[i]);\r\n    //     }\r\n\r\n    //     var tempChildPos1 =this.pos1.children; \r\n    //     for (var i = 0; i < tempChildPos1.length; i++) \r\n    //     { \r\n    //         this.midPos.push(tempChildPos1[i]);\r\n    //     }\r\n\r\n    //     var tempChildPos2 =this.pos2.children; \r\n    //     for (var i = 0; i < tempChildPos2.length; i++) \r\n    //     { \r\n    //         this.rightPos.push(tempChildPos2[i]);\r\n    //     }\r\n    }\r\n\r\n    start () {\r\n       \r\n        \r\n    }\r\n\r\n    ///获取位置信息\r\n    GetPos(index:number):cc.Vec2\r\n    {\r\n       \r\n        return this.basketBornPos[index].convertToWorldSpaceAR(cc.v2(0,0));\r\n    }\r\n\r\n\r\n   public ProduceOneBasketByPos(basketPos:number[])\r\n   {\r\n     \r\n        this.sizeType = this.random(0,2);\r\n        let pos ;\r\n        let startPos;\r\n\r\n        for(var i = 0; i < basketPos.length; i++)\r\n        {\r\n            if(basketPos[i] != 0)\r\n            {\r\n                pos = this.GetPos(i);\r\n                startPos = this.node.convertToNodeSpaceAR(pos);\r\n                let tempbasket:cc.Node;\r\n                if(i < 2)\r\n                {\r\n                    this.posType = -1;\r\n                }\r\n                else if(i < 4)\r\n                {\r\n                    this.posType = 0;\r\n                }\r\n                else\r\n                {\r\n                    this.posType = 1;\r\n                }\r\n\r\n                switch(this.sizeType)\r\n                {\r\n                    case 0:\r\n                         tempbasket = cc.instantiate(this.smallBasket);\r\n                         switch(this.posType)\r\n                         {\r\n                             case -1:\r\n                                      tempbasket.rotation =  30;\r\n                                 break;\r\n                             case 0:\r\n                                     tempbasket.rotation =  0;\r\n                                 break;\r\n                             case 1:\r\n                                     tempbasket.rotation =  -30;\r\n                                 break;    \r\n                         }\r\n                         break;\r\n                    case 1:\r\n                        if(this.posType != 0)\r\n                        {\r\n                            \r\n                            switch(this.posType)\r\n                            {\r\n                                case -1:\r\n                                        tempbasket = cc.instantiate(this.bigBasketL);\r\n                                    break;\r\n                                \r\n                            \r\n                                case 1:\r\n                                        tempbasket = cc.instantiate(this.bigBasketR);\r\n                                        cc.log(tempbasket.scaleX);\r\n                                    break;    \r\n                            }\r\n                        }\r\n                        else \r\n                        {\r\n                            tempbasket = cc.instantiate(this.smallBasket);\r\n                        }\r\n                        \r\n                        \r\n                    break;\r\n\r\n                }\r\n\r\n                this.basketParent.addChild(tempbasket);\r\n   \r\n                this.basketParent.convertToNodeSpaceAR(startPos);\r\n        \r\n                tempbasket.position = startPos;\r\n        \r\n                var basketS =  tempbasket.getComponent<Basket>(Basket);\r\n                basketS.AdjustColliders();\r\n                this.basketList.push(tempbasket);\r\n        \r\n                let backSp = tempbasket.getChildByName(\"BackSprite\");\r\n                let frontSp = tempbasket.getChildByName(\"FrontSprite\");\r\n                let bottom = tempbasket.getChildByName(\"BasketBottom\");\r\n                \r\n        \r\n               \r\n                var frontSpWorldPos = tempbasket.convertToWorldSpaceAR(frontSp.getPosition());\r\n        \r\n                var frontTargetPos =  this.basketFrontParent.convertToNodeSpaceAR(frontSpWorldPos);\r\n        \r\n                frontSp.parent = this.basketFrontParent;\r\n        \r\n                frontSp.position = frontTargetPos;\r\n                \r\n                 var backSpWorldPos = tempbasket.convertToWorldSpaceAR(backSp.getPosition());\r\n        \r\n                 var backTargetPos =  this.basketBackParent.convertToNodeSpaceAR(backSpWorldPos);\r\n        \r\n                 backSp.parent = this.basketBackParent;\r\n                 backSp.position = backTargetPos;\r\n        \r\n                 switch(this.sizeType)\r\n                 {\r\n                     case 0:\r\n                             \r\n                             switch(this.posType)\r\n                             {\r\n                                 case -1:\r\n                                        backSp.rotation = 30;\r\n                                        frontSp.rotation = 30;\r\n                                     break;\r\n                                 case 0:\r\n                                        backSp.rotation = 0;\r\n                                        frontSp.rotation = 0;\r\n                                     break;\r\n                                 case 1:\r\n                                        backSp.rotation = -30;\r\n                                        frontSp.rotation = -30;\r\n                                     break;    \r\n                             }\r\n                         break;\r\n         \r\n                 }\r\n              \r\n            }\r\n        }\r\n\r\n        \r\n       \r\n   }\r\n\r\n\r\n    public ProduceOneBasket()\r\n    {   \r\n        this.posType = this.random(-1,2);\r\n        this.sizeType = this.random(0,2);\r\n\r\n\r\n        let pos = this.GetPos(0);\r\n       \r\n\r\n        var startPos =  this.node.convertToNodeSpaceAR(pos);\r\n      \r\n        let tempbasket:cc.Node;\r\n        switch(this.sizeType)\r\n        {\r\n            case 0:\r\n                    tempbasket = cc.instantiate(this.smallBasket);\r\n                    switch(this.posType)\r\n                    {\r\n                        case -1:\r\n                                 tempbasket.rotation =  30;\r\n                            break;\r\n                        case 0:\r\n                                tempbasket.rotation =  0;\r\n                            break;\r\n                        case 1:\r\n                                tempbasket.rotation =  -30;\r\n                            break;    \r\n                    }\r\n                break;\r\n\r\n            case 1:\r\n                    if(this.posType != 0)\r\n                    {\r\n                      \r\n                        switch(this.posType)\r\n                        {\r\n                            case -1:\r\n                                    tempbasket = cc.instantiate(this.bigBasketL);\r\n                                break;\r\n                         \r\n                       \r\n                            case 1:\r\n                                    tempbasket = cc.instantiate(this.bigBasketR);\r\n                                    cc.log(tempbasket.scaleX);\r\n                                break;    \r\n                        }\r\n                    }\r\n                    else \r\n                    {\r\n                        tempbasket = cc.instantiate(this.smallBasket);\r\n                    }\r\n                    \r\n                   \r\n                break;\r\n        }\r\n\r\n      \r\n\r\n        this.basketParent.addChild(tempbasket);\r\n   \r\n        this.basketParent.convertToNodeSpaceAR(startPos);\r\n\r\n        tempbasket.position = startPos;\r\n\r\n        var basketS =  tempbasket.getComponent<Basket>(Basket);\r\n        basketS.AdjustColliders();\r\n        this.basketList.push(tempbasket);\r\n\r\n        let backSp = tempbasket.getChildByName(\"BackSprite\");\r\n        let frontSp = tempbasket.getChildByName(\"FrontSprite\");\r\n        let bottom = tempbasket.getChildByName(\"BasketBottom\");\r\n        \r\n\r\n       \r\n        var frontSpWorldPos = tempbasket.convertToWorldSpaceAR(frontSp.getPosition());\r\n\r\n        var frontTargetPos =  this.basketFrontParent.convertToNodeSpaceAR(frontSpWorldPos);\r\n\r\n        frontSp.parent = this.basketFrontParent;\r\n\r\n        frontSp.position = frontTargetPos;\r\n        \r\n         var backSpWorldPos = tempbasket.convertToWorldSpaceAR(backSp.getPosition());\r\n\r\n         var backTargetPos =  this.basketBackParent.convertToNodeSpaceAR(backSpWorldPos);\r\n\r\n         backSp.parent = this.basketBackParent;\r\n         backSp.position = backTargetPos;\r\n\r\n         switch(this.sizeType)\r\n         {\r\n             case 0:\r\n                     \r\n                     switch(this.posType)\r\n                     {\r\n                         case -1:\r\n                                backSp.rotation = 30;\r\n                                frontSp.rotation = 30;\r\n                             break;\r\n                         case 0:\r\n                                backSp.rotation = 0;\r\n                                frontSp.rotation = 0;\r\n                             break;\r\n                         case 1:\r\n                                backSp.rotation = -30;\r\n                                frontSp.rotation = -30;\r\n                             break;    \r\n                     }\r\n                 break;\r\n \r\n            //  case 1:\r\n            //         switch(this.posType)\r\n            //              {\r\n            //                  case -1:\r\n            //                         backSp.scaleX = -1\r\n            //                         frontSp.rotation = 30;\r\n            //                      break;\r\n                          \r\n                        \r\n            //                  case 1:\r\n            //                          tempbasket.scaleX =  -1;\r\n            //                      break;    \r\n            //              }\r\n                    \r\n            //      break;\r\n         }\r\n      \r\n       \r\n    }\r\n\r\n    //获取篮筐的位置类型（左 中 右）\r\n    public GetPosType():number\r\n    {\r\n        return this.posType;\r\n    }\r\n\r\n    public RemoveOneBasket(basketNode:cc.Node)\r\n    {\r\n        var nodeIndex = this.basketList.indexOf(basketNode);\r\n        var targetBasket = this.basketList[nodeIndex];\r\n        var script = targetBasket.getComponent<Basket>(Basket);\r\n        script.RemoveBasket();\r\n        this.basketList.splice(nodeIndex,1);\r\n    }\r\n\r\n    public RemoveAllBaskets()\r\n    {\r\n        var lenght = this.basketList.length;\r\n        \r\n        for(var i = 0; i < lenght; i++)\r\n        {\r\n            this.RemoveOneBasket(this.basketList[0]);\r\n        }\r\n\r\n       \r\n    }\r\n\r\n    random(lower, upper) {\r\n\r\n        return Math.floor(Math.random() * (upper - lower)) + lower;\r\n        \r\n    }\r\n\r\n}\r\n"]}