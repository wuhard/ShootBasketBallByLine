{"version":3,"sources":["GameViewLogic.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import EnterBallAni from \"./EnterBallAni\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class GameViewLogic extends cc.Component {\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    @property(cc.Prefab)\r\n    physicsNode: cc.Prefab;\r\n    @property(cc.Prefab)\r\n    ball:cc.Prefab = null;\r\n    @property(cc.Node)\r\n    ballParent:cc.Node;\r\n    @property(cc.Node)\r\n    basketBackParent:cc.Node;//篮球背面图片\r\n    @property(cc.Node)\r\n    basketParent:cc.Node;\r\n    @property(cc.Node)\r\n    basketFrontParent:cc.Node;//篮球前面图片\r\n    @property(cc.Node)\r\n    linesParent:cc.Node;\r\n    physicsNodeArr: cc.Node[] = [];\r\n    @property(cc.Prefab)\r\n    enterBallAni:cc.Prefab;\r\n    @property(cc.Prefab)\r\n    basket:cc.Prefab;\r\n    \r\n\r\n    onLoad () {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getPhysicsManager().debugDrawFlags = cc.PhysicsManager.DrawBits.e_aabbBit |\r\n        cc.PhysicsManager.DrawBits.e_pairBit |\r\n        cc.PhysicsManager.DrawBits.e_centerOfMassBit |\r\n        cc.PhysicsManager.DrawBits.e_jointBit |\r\n        cc.PhysicsManager.DrawBits.e_shapeBit\r\n        ;\r\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -960);\r\n\r\n        let self = this;\r\n        \r\n        this.instantiateOneBall();\r\n        self.node.on(cc.Node.EventType.TOUCH_START, self.touchStart.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_MOVE, self.touchMove.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_END, self.touchEnd.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_CANCEL, self.touchCancel.bind(self));\r\n\r\n        //先创建一个物体等待绘画，如果在touchstart里面创建第一条线就不能监听到划线的start函数了。\r\n        let physicsNode = cc.instantiate(this.physicsNode);\r\n        this.node.addChild(physicsNode);\r\n        physicsNode.name = \"first\";\r\n        this.physicsNodeArr.push(physicsNode);\r\n\r\n        this.ProduceOneBasket(cc.v2(182,509));\r\n        // this.schedule(function() {\r\n        //     // 这里的 this 指向 component\r\n        //     this.ProduceOneBasket(cc.v2(600,500));\r\n        // }, 5); //5s执行一次\r\n    }\r\n\r\n    onEnter() {\r\n        \r\n    }\r\n\r\n    touchStart(event : cc.Event.EventTouch) \r\n    {\r\n        let physicsNode = cc.instantiate(this.physicsNode);\r\n        this.node.addChild(physicsNode); \r\n        this.physicsNodeArr.push(physicsNode);\r\n        cc.log(\"logicStart\");\r\n    }\r\n\r\n    touchMove(event : cc.Event.EventTouch) {\r\n        \r\n    }\r\n\r\n    touchEnd(event : cc.Event.EventTouch) {\r\n        \r\n    }\r\n\r\n    touchCancel(event : cc.Event.EventTouch) {\r\n        \r\n    }\r\n\r\n    public instantiateOneBall()\r\n    {\r\n        var startPos =  this.node.convertToNodeSpaceAR(cc.v2(600,1155));\r\n        let tempball = cc.instantiate(this.ball);\r\n        this.ballParent.addChild(tempball);\r\n        tempball.setPosition(startPos);\r\n      \r\n    }\r\n\r\n    public PlayEnterBallAni(pos:cc.Vec2)\r\n    {\r\n        let ani = cc.instantiate(this.enterBallAni);\r\n        cc.log(\"PlayAni\");\r\n        this.node.addChild(ani);\r\n        ani.setPosition(pos);\r\n    }\r\n\r\n    public ProduceOneBasket(pos:cc.Vec2)\r\n    {   \r\n        var startPos =  this.node.convertToNodeSpaceAR(pos);\r\n        let tempbasket= cc.instantiate(this.basket);\r\n        this.basketParent.addChild(tempbasket);\r\n        let backSp = tempbasket.getChildByName(\"BackSprite\");\r\n        let frontSp = tempbasket.getChildByName(\"FrontSprite\");\r\n        let bottom = tempbasket.getChildByName(\"BasketBottom\");\r\n        \r\n        tempbasket.setPosition(startPos);\r\n        var backTargetPos = cc.pAdd(backSp.position,tempbasket.position);\r\n        cc.log(backTargetPos);\r\n        // var FrontTargetPos = cc.pAdd(frontSp.position,tempbasket.position);\r\n        var offsetBottomPos = bottom.position;\r\n         tempbasket.removeChild(backSp);\r\n        // tempbasket.removeChild(frontSp);\r\n         this.basketBackParent.addChild(backSp);\r\n        // this.basketFrontParent.addChild(frontSp);\r\n         backSp.position = backTargetPos;\r\n        // frontSp.position = FrontTargetPos;\r\n        //this.MoveToPos(backSp,backTargetPos);\r\n        \r\n         bottom.position = offsetBottomPos;\r\n        // this.basketParent.addChild(tempbasket);\r\n       \r\n    }\r\n\r\n    MoveToPos(colliderNode:cc.Node,pos : cc.Vec2){\r\n        \r\n        this.scheduleOnce(function(){\r\n                colliderNode.position = pos;\r\n            },0);\r\n    }\r\n    \r\n\r\n    public RemaveAllLine()\r\n    {\r\n      \r\n        var children = this.node.children;\r\n       \r\n        for(var i = 0; i < children.length - 1; i++)\r\n        {\r\n            children[i].destroy();\r\n        }\r\n\r\n        var arrLenght = this.physicsNodeArr.length;\r\n        this.physicsNodeArr.slice(0,arrLenght-1);\r\n    }\r\n\r\n    //删除节点\r\n    public RemoveBasketNode(nodeObj:cc.Node)\r\n    {\r\n\r\n        var script = nodeObj.getComponent(\"Basket\");\r\n        script.RemoveBasket();\r\n    }\r\n}\r\n"]}