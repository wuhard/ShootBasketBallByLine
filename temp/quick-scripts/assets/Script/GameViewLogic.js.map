{"version":3,"sources":["GameViewLogic.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import EnterBallAni from \"./EnterBallAni\";\r\nimport ProduceBasketManager from \"./ProduceBasketManager\";\r\nimport Singleton from \"./Singleton\";\r\nimport NoticeAndProduceManager from \"./NoticeAndProduceManager\";\r\nimport EffectPlayManager from \"./EffectPlayManager\";\r\nimport LevelDataManager from \"./LevelDataManager\";\r\nimport { BasketInfor, ShootInfor } from \"./SceneLevelData\";\r\nimport Ball from \"./Ball\";\r\nimport ShowHOrHideObj from \"./ShowOrHideObj\";\r\nimport EnterScenePanel from \"./EnterScenePanel\";\r\nimport PhysicsNodeLogic from \"./physicsNodeLogic\";\r\nimport MenuPanel from \"./MenuPanel\";\r\nimport AudioPlayManager from \"./AudioPlayManager\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet talefun = (<any>cc).talefun;\r\n\r\n@ccclass\r\nexport default class GameViewLogic extends cc.Component {\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    @property(cc.Prefab)\r\n    physicsNode: cc.Prefab;\r\n    @property(cc.Prefab)\r\n    ball:cc.Prefab = null;\r\n    @property(cc.Node)\r\n    ballParent:cc.Node;\r\n\r\n    @property(cc.Node)\r\n    linesParent:cc.Node;\r\n    physicsNodeArr: cc.Node[] = [];\r\n     \r\n    @property(cc.Prefab)\r\n    drawLineParticlePrefab:cc.Prefab;\r\n\r\n    drawLineParticle:cc.Node;\r\n\r\n    @property(cc.Prefab)\r\n    boomBasket:cc.Prefab;\r\n\r\n    @property(EnterScenePanel)\r\n    enterScenePanel:EnterScenePanel;\r\n\r\n    @property(MenuPanel)\r\n    menuPanel:MenuPanel;\r\n\r\n    @property(ProduceBasketManager)\r\n    produceBasketManager:ProduceBasketManager;\r\n    @property(NoticeAndProduceManager)\r\n    noticeAndProduceManager:NoticeAndProduceManager;\r\n\r\n    @property(EffectPlayManager)\r\n    effectPlayManager:EffectPlayManager;\r\n\r\n    @property(LevelDataManager)\r\n    levelDataManager:LevelDataManager;\r\n    \r\n    @property(AudioPlayManager)\r\n    audioPlayManager:AudioPlayManager;\r\n\r\n    @property(ShowHOrHideObj)\r\n    uiPanel:ShowHOrHideObj;\r\n\r\n    @property(cc.Label)\r\n    lineCount:cc.Label;\r\n\r\n    //当前关卡\r\n    currentLevelIndex:number = 0;\r\n\r\n    //最大关卡\r\n    maxLevelCount:number = 0;\r\n  \r\n    ///线的数量\r\n    drawLineCount:number = 3;\r\n\r\n    ballCount: number = 0;\r\n\r\n    drawEnable:boolean = false;\r\n\r\n    isFinishCurrentLevel:boolean = false;\r\n\r\n    canDrawPraticle:boolean = false;\r\n\r\n    score:number = 0;\r\n\r\n    onLoad () {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        // cc.director.getPhysicsManager().debugDrawFlags = cc.PhysicsManager.DrawBits.e_aabbBit |\r\n        // cc.PhysicsManager.DrawBits.e_pairBit |\r\n        // cc.PhysicsManager.DrawBits.e_centerOfMassBit |\r\n        // cc.PhysicsManager.DrawBits.e_jointBit |\r\n        // cc.PhysicsManager.DrawBits.e_shapeBit\r\n        // ;\r\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -960);\r\n\r\n        let self = this;\r\n        \r\n       \r\n        self.node.on(cc.Node.EventType.TOUCH_START, self.touchStart.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_MOVE, self.touchMove.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_END, self.touchEnd.bind(self));\r\n        self.node.on(cc.Node.EventType.TOUCH_CANCEL, self.touchCancel.bind(self));\r\n\r\n        //先创建一个物体等待绘画，如果在touchstart里面创建第一条线就不能监听到划线的start函数了。\r\n\r\n\r\n       \r\n        // this.schedule(function() {\r\n        //     // 这里的 this 指向 component\r\n        //     this.ProduceOneBasket(cc.v2(600,500));\r\n        // }, 5); //5s执行一次\r\n    }\r\n\r\n    start()\r\n    {    \r\n \r\n        this.ShowMenuPanel();\r\n    }\r\n    public BackToMainPage()\r\n    {\r\n       \r\n    }\r\n\r\n    public StartGame()\r\n    {\r\n        this.uiPanel.ShowOnlyObjByIndex(1);\r\n        this.StartDrawLine();\r\n        this.drawEnable = true;\r\n        this.ProduceOneBasketCase(12,1);\r\n    }\r\n\r\n  \r\n\r\n    StartDrawLine()\r\n    {\r\n        this.physicsNodeArr.splice(0,this.physicsNodeArr.length);\r\n        let physicsNode = cc.instantiate(this.physicsNode);\r\n        this.node.addChild(physicsNode);\r\n        physicsNode.name = \"first\";\r\n        this.physicsNodeArr.push(physicsNode);\r\n    }\r\n\r\n    public ShowMenuPanel()\r\n    {\r\n        this.uiPanel.ShowOnlyObjByIndex(0);\r\n        this.menuPanel.ShowLevelInfor(this.currentLevelIndex,this.score,this.maxLevelCount);\r\n    }\r\n\r\n\r\n    onEnter() {\r\n        \r\n    }\r\n\r\n    touchStart(event : cc.Event.EventTouch) \r\n    {\r\n        if(this.drawEnable == false)\r\n        {\r\n            return;\r\n        }\r\n\r\n        cc.log(this.drawLineCount);\r\n        if(this.drawLineCount - 1 >= 0)\r\n        {\r\n            if(this.drawLineCount - 1 > 0)\r\n            {\r\n                let physicsNode = cc.instantiate(this.physicsNode);\r\n                this.node.addChild(physicsNode); \r\n                physicsNode.name = this.physicsNodeArr.length.toString();\r\n                this.physicsNodeArr.push(physicsNode);\r\n               \r\n                this.drawLineParticle = cc.instantiate(this.drawLineParticlePrefab);\r\n                this.node.addChild(this.drawLineParticle);\r\n                let touchLoc = event.getLocation();\r\n                touchLoc = this.node.convertToNodeSpaceAR(touchLoc);\r\n                this.drawLineParticle.setPosition(touchLoc);\r\n                this.canDrawPraticle = true;\r\n            }\r\n           \r\n            this.drawLineCount--; \r\n            this.enterScenePanel.ShowLineCount(\"x \"+ this.drawLineCount.toString());\r\n        \r\n            if(this.drawLineCount == 0)\r\n            {\r\n                cc.log(\"CheckBallCanEnterBasket\");\r\n                this.drawEnable = false;\r\n                this.schedule(this.CheckEnterBasket, 0.2, 100,2);//2s后执行一次\r\n            }\r\n        } \r\n       \r\n             \r\n    }\r\n\r\n\r\n\r\n    CheckEnterBasket()\r\n    {\r\n        if (!this.CheckBallCanEnterBasket())\r\n        {\r\n         \r\n             this.unschedule(this.CheckEnterBasket);\r\n             \r\n             this.ShowFaithAction();\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n    //显示失败的动作\r\n    public ShowFaithAction()\r\n    {\r\n        this.audioPlayManager.PlayEffect(\"球落空\");\r\n        this.RemaveAllLine();\r\n        this.produceBasketManager.RemoveAllBaskets();\r\n        this.noticeAndProduceManager.DestroyAllBall();\r\n        this.scheduleOnce(() => {\r\n    \r\n             this.ShowLosePanel(true);\r\n\r\n        }, 2);//2s后执行一次\r\n    }\r\n\r\n    //检测球是否能进篮筐\r\n    CheckBallCanEnterBasket():boolean\r\n    {\r\n        if(this.noticeAndProduceManager.CheckAllBallCanEnter())\r\n        {\r\n           \r\n            return true;\r\n        }\r\n\r\n        return false;\r\n       \r\n    }\r\n\r\n    \r\n\r\n    touchMove(event : cc.Event.EventTouch) {\r\n        if(this.canDrawPraticle == false)\r\n        {\r\n            return\r\n        }\r\n        let touchLoc = event.getLocation();\r\n        touchLoc = this.node.convertToNodeSpaceAR(touchLoc);\r\n        this.drawLineParticle.setPosition(touchLoc);\r\n    }\r\n\r\n    touchEnd(event : cc.Event.EventTouch) {\r\n        if(this.drawEnable == false)\r\n        {\r\n            return;\r\n        }\r\n        this.canDrawPraticle = false;\r\n        this.drawLineParticle.destroy();\r\n    }\r\n\r\n    touchCancel(event : cc.Event.EventTouch) {\r\n        if(this.drawEnable == false)\r\n        {\r\n            return;\r\n        }\r\n        this.drawLineParticle.destroy();\r\n        this.canDrawPraticle = false;\r\n    }\r\n\r\n    //创建下一关的数据\r\n    public ProduceNextLevelBasketCase(delayTime:number = 0)\r\n    {\r\n     \r\n        if(this.currentLevelIndex + 1 < this.maxLevelCount)\r\n        {\r\n            this.currentLevelIndex++;\r\n        }  \r\n    \r\n        this.ProduceOneBasketCase(this.currentLevelIndex,delayTime);\r\n    }\r\n\r\n    ///进了一个球\r\n    public EnterOneBall(ball:cc.Node,basketBottom:cc.Node)\r\n    {\r\n        this.PlayEnterBallEffect(basketBottom.convertToWorldSpaceAR(cc.v2(0, 0)))\r\n        this.audioPlayManager.PlayEffect(\"得分.mp3\",false);\r\n        this.ballCount--;\r\n        if(this.ballCount == 0)\r\n        {\r\n            this.RemoveBasketNode(basketBottom.parent);\r\n            this.RemaveAllLine();\r\n            \r\n            this.scheduleOnce(() => {\r\n                \r\n             \r\n                this.ShowWinPanel();\r\n    \r\n             }, 2);//2s后执行一次\r\n           \r\n           // this.ProduceNextLevelBasketCase(2);\r\n        }\r\n    }\r\n\r\n\r\n    public ProduceNextBaksetCase()\r\n    {\r\n        this.StartDrawLine();\r\n        this.drawLineCount = 3;\r\n        this.drawEnable = true;\r\n        this.uiPanel.ShowOnlyObjByIndex(1);\r\n        this.ProduceNextLevelBasketCase(2);\r\n    }\r\n\r\n    ///创建一个篮球用例\r\n    public ProduceOneBasketCase(levelIndex:number,delayTime:number = 0)\r\n    {\r\n\r\n        this.audioPlayManager.PlayEffect(\"开场准备\");\r\n\r\n        this.drawLineCount = 3;\r\n        this.enterScenePanel.ShowLineCount(\"x \"+this.drawLineCount.toString());\r\n      //  cc.log(\"one basket\");\r\n        this.currentLevelIndex = levelIndex;\r\n        this.scheduleOnce(() => {\r\n           \r\n            var basketInfor : BasketInfor[] = this.levelDataManager.GetBasketInforsByLevel(levelIndex);\r\n            this.produceBasketManager.ProduceOneBasketCase(basketInfor);\r\n            this.maxLevelCount = this.levelDataManager.GetLevelLength();\r\n\r\n         }, delayTime);//2s后执行一次\r\n\r\n         this.scheduleOnce(() => {\r\n            this.ProduceOneShootCase(levelIndex);\r\n            this.ballCount =  this.noticeAndProduceManager.basketBallNum;\r\n         }, delayTime+1);//2s后执行一次\r\n\r\n    }\r\n\r\n    ///创建一个球和炸弹的射击案例\r\n    public ProduceOneShootCase(levelIndex:number)\r\n    {\r\n        var shootInfors: ShootInfor[] = this.levelDataManager.GetShootInforByLevel(levelIndex);\r\n        this.noticeAndProduceManager.ProduceOneShootCase(shootInfors);\r\n       \r\n    }\r\n\r\n    \r\n///播放进球特效\r\n    public PlayEnterBallEffect(pos:cc.Vec2)\r\n    {\r\n        this.effectPlayManager.PlayEnterBallAni(pos);\r\n        this.effectPlayManager.PlayScoreAni(pos,this.drawLineCount);\r\n        this.score += this.drawLineCount +1;\r\n        this.enterScenePanel.ShowScore( this.score);\r\n\r\n    }\r\n    \r\n\r\n    //创建一个篮筐\r\n   \r\n    public ProduceBoomBasket(pos:cc.Vec2)\r\n    {\r\n        this.audioPlayManager.PlayEffect(\"bomb\");\r\n        this.effectPlayManager.PlayBombBasketAni(pos);\r\n    }\r\n\r\n    MoveToPos(colliderNode:cc.Node,pos : cc.Vec2){\r\n        \r\n        this.scheduleOnce(function(){\r\n                colliderNode.position = pos;\r\n            },0);\r\n    }\r\n    \r\n\r\n    public RemaveAllLine()\r\n    {    \r\n        var children = this.node.children;\r\n        var lineLenght = this.physicsNodeArr.length;\r\n      \r\n       \r\n        for(var j = 0; j <lineLenght; j++)\r\n        {          \r\n     \r\n            if(this.physicsNodeArr[j] != null)\r\n            {\r\n                let lineDiePoints:cc.Vec2[] = this.physicsNodeArr[j].getComponent<PhysicsNodeLogic>(PhysicsNodeLogic).points;\r\n             \r\n                this.effectPlayManager.PlayLineDieEffection(lineDiePoints);\r\n            }\r\n    \r\n        }\r\n        \r\n        for(var i = 0; i < children.length ; i++)\r\n            {      \r\n                children[i].destroy();\r\n            }\r\n    \r\n            var arrLenght = this.physicsNodeArr.length;\r\n            cc.log(arrLenght);\r\n            this.physicsNodeArr.splice(0,arrLenght);\r\n        \r\n        \r\n       \r\n    }\r\n\r\n  \r\n\r\n    //删除节点\r\n    public RemoveBasketNode(nodeObj:cc.Node)\r\n    {\r\n        this.produceBasketManager.RemoveOneBasket(nodeObj);\r\n    }\r\n\r\n    ///失败\r\n    public ShowLosePanel(flag:boolean)\r\n    {\r\n        this.unscheduleAllCallbacks();\r\n        this.uiPanel.ShowOnlyObjByIndex(3);\r\n        this.produceBasketManager.RemoveAllBaskets();\r\n        this.noticeAndProduceManager.StopProduceAction();\r\n        this.audioPlayManager.PlayEffect(\"失败界面\");\r\n     \r\n    \r\n    }\r\n\r\n    public ShowWinPanel()\r\n    {\r\n       \r\n        this.unscheduleAllCallbacks();\r\n        this.uiPanel.ShowOnlyObjByIndex(2);\r\n        this.produceBasketManager.RemoveAllBaskets();\r\n        this.noticeAndProduceManager.DestroyAllBall();\r\n        this.audioPlayManager.PlayEffect(\"胜利界面\");\r\n     \r\n    }\r\n\r\n    public GotoMainPageFromWinPanel()\r\n    {\r\n        if(this.currentLevelIndex + 1 < this.maxLevelCount)\r\n        {\r\n            this.currentLevelIndex++;\r\n        } \r\n        this.ShowMenuPanel();\r\n    }\r\n\r\n    public GotoMainPageFromLosePanel()\r\n    {\r\n        this.ShowMenuPanel();\r\n    }\r\n\r\n\r\n    public ReplayGame()\r\n    {\r\n        this.score = 0;\r\n        this.StartDrawLine();\r\n        this.drawLineCount = 3;\r\n        this.drawEnable = true;\r\n        this.uiPanel.ShowOnlyObjByIndex(1);\r\n\r\n        this.enterScenePanel.ShowScore(this.score);\r\n        this.ProduceOneBasketCase(this.currentLevelIndex);\r\n   \r\n    }\r\n}\r\n"]}